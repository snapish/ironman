<!DOCTYPE HTML>
<head>
    <link rel="stylesheet" href ='/ironman/skippy.css'>
    <meta name="viewport" content="width=device-width, initial-scale=.8">
</head>
<body>
    <button id="roll" onclick="roll()">Roll Characters</button>
    <div id="shiekbox">
    <input id="checkbox"  type="checkbox" checked >
    <label >Split Shiek and Zelda </label>

    <input id="shittiesbox" type="checkbox" checked>
    
    <label>
        Remove the bad characters</label>
       </div>

    <div class = "flex-container" id ="player1">
    </div>
    <div class="flex-container" id="player2">
    </div>
    <div class="flex-container" id="player3">
    </div>
    <div class="flex-container" id="player4">
    </div>
    <div class="flex-container" id="stage">
    </div>
    <div id="playersdrop">
    <select id="players">
        <option selected value ='2'> 2</option>
        <option value ='3'> 3</option>
        <option  value ='4'> 4</option>
    </select> Player Count
    </div>
    <div id="chardrop">
    <select id = "chars">
        <option value ='1'> 1</option>
        <option value ='2'> 2</option>
        <option value ='3'> 3</option>
        <option selected value ='4'> 4</option>
        <option value ='5'> 5</option>
        <option value ='6'> 6</option>
        <option value ='7'> 7</option>
        <option value ='8'> 8</option>
        <option value ='9'> 9</option>
        <option value ='10'> 10</option>
        <option value ='11'> 11</option>
        <option value ='12'> 12</option>
        <option value ='13'> 13</option>
        <option value ='14'> 14</option>
        <option value ='15'> 15</option>
        <option value ='16'> 16</option>
        <option value ='17'> 17</option>
        <option value ='18'> 18</option>
        <option value ='19'> 19</option>
        <option value ='20'> 20</option>
        <option value ='21'> 21</option>
        <option value ='22'> 22</option>
        <option value ='23'> 23</option>
        <option value ='24'> 24</option>
        <option value ='25'> 25</option>
        <option id="shiek" value ='26'> 26</option>
    </select>
        Character Count
    
    <br>
        <br>
        <p> My old code is so bad and im looking into it, but the website will freeze 
        if you have the shitties disabled and have anything higher than 16 selected in the character count
    </p>
    </div>
        <script>
        var stageset = new Set();
        var checkbox = document.getElementById("checkbox"); 
        var shitties = [14,16,17,19,22,23,25,4,6,7]; //array of characters image numbers--- kirby, zelda, link, pichu, mewtwo, gw, roy,yoshi, bowser, dk
        checkbox.addEventListener('change', function () { //when the checkbox is used
            if(document.getElementById("chars").value == 26){ //if 26 is selected
               document.getElementById("chars").selectedIndex = 24; //change it to 25
            }
            if (this.checked) { 
                document.getElementById("shiek").style.display = "block"; //shows shiek
            } else {
                document.getElementById("shiek").style.display = "none"; //hides shiek

            }
        });
        function Random() {
            var min = 1;
            var max = 26;
            if (document.getElementById("checkbox").checked)
                max = 27;
            
            return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
        }
        function StageRandom() {
            var min = 1;
            var max = 18;
            return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
        }
        function roll() {
            var characterSlots = document.getElementById("chars").value; //gets dropdown value
            var player1 = new Set();
            var player2 = new Set();
            var player3 = new Set();
            var player4 = new Set();
            var selection;
            var bool = false;
            var stage = StageRandom();
            if(document.getElementById("shittiesbox").checked){
             characterSlots = 16;
                console.log("shitter box was checked and changed slots to 16");
            }
            else{
             console.log("shitter box not checked, kept size the same");   
            }
            if(stage == 0)
                stage = 1;
            while (player1.size < characterSlots) { //runs thru until set is full 
                if(!document.getElementById("shittiesbox").checked){
                   // console.log("shitties are in play");
                }
                if(document.getElementById("shittiesbox").checked){ // if no shitties is checked
                                     bool = true;
                                   //  console.log("Shitties are not in play");
                         while(bool){ 
                        selection = Random(); //rolls for 1-26
                        // my lazy check for if the roll is a shitty
                        if(selection != shitties[0] && selection != shitties[1] && selection != shitties[2] && selection != shitties[3] && selection != shitties[4] && selection != shitties[5] && selection != shitties[6] && selection != shitties[7] && selection != shitties[8] && selection != shitties[9] ){
                            bool = false; //stops the loop because the roll was not a shitty
                        player1.add(selection); // adds
                                    }
                }
                
            }
            else{
                while (player1.size < characterSlots) {
                    selection = Random();
                    player1.add(selection);//adds  roll to the set
                                                         }
                }
            }
            
            
            
              while (player2.size < characterSlots) { //runs thru until set is full 
                if(!document.getElementById("shittiesbox").checked)
                    console.log("shitties are in play");
                if(document.getElementById("shittiesbox").checked){ // if no shitties is checked
                                     bool = true;
                                     console.log("Shitties are not in play");
                while(bool){ 
                    selection = Random(); //rolls for 1-26
                    // my lazy check for if the roll is a shitty
                    if(selection != shitties[0] && selection != shitties[1] && selection != shitties[2] && selection != shitties[3] && selection != shitties[4] && selection != shitties[5] && selection != shitties[6] && selection != shitties[7] && selection != shitties[8] && selection != shitties[9] ){
                        bool = false; //stops the loop because the roll was not a shitty
                    player2.add(selection); // adds
                }
                }
                
            }
            else{
                while (player2.size < characterSlots) {
                    selection = Random();
                    player2.add(selection);//adds  roll to the set

                }
                }
            }
            
            
            if(document.getElementById("players").value == 4 || document.getElementById("players").value == 3){ //3 or 4 players selected
            while (player3.size < characterSlots) {

                if(document.getElementById("shittiesbox").checked){ // if no shitties is checked
                while(bool){ 
                    selection = Random(); //rolls for 1-26
                    // my lazy check for if the roll is a shitty
                    if(selection != shitties[0] && selection != shitties[1] && selection != shitties[2] && selection != shitties[3] && selection != shitties[4] && selection != shitties[5] && selection != shitties[6] && selection != shitties[7] && selection != shitties[8] && selection != shitties[9] ){
                        bool = false; //stops the loop because the roll was not a shitty
                    player3.add(selection); // adds
                }}
            }
            else{
                                    while (player3.size < characterSlots) {
                    selection = Random();
                    player3.add(selection);//adds  roll to the set
                }
                }
            }
            }
            if(document.getElementById("players").value == 4 ){ 
            while (player4.size < characterSlots) {

                if(document.getElementById("shittiesbox").checked){ // if no shitties is checked
                while(bool){ 
                    selection = Random(); //rolls for 1-26
                    // my lazy check for if the roll is a shitty
                    if(selection != shitties[0] && selection != shitties[1] && selection != shitties[2] && selection != shitties[3] && selection != shitties[4] && selection != shitties[5] && selection != shitties[6] && selection != shitties[7] && selection != shitties[8] && selection != shitties[9] ){
                        bool = false; //stops the loop because the roll was not a shitty
                    player4.add(selection); // adds
                }}
            }
            else{
                                   while (player4.size < characterSlots) {
                    selection = Random();
                    player4.add(selection);//adds  roll to the set
                }
                }
            }
            }
            var divs = '';
            player1.forEach(function (item) {
                var path = "/ironman/images/" + item + ".png";
                divs += '<div class="flex-item" ><img src="' + path + '"></div>';
            //    console.log(divs)
            });

            document.getElementById("player1").innerHTML = divs;
            var divs = '';
            player2.forEach(function (item) {
                var path = "/ironman/images/" + item + ".png";
                divs += '<div class="flex-item" ><img src="' + path + '"></div>';
              //  console.log(divs)
            });

            document.getElementById("player2").innerHTML = divs;
            var divs = '';
            player3.forEach(function (item) {
                var path = "/ironman/images/" + item + ".png";
                divs += '<div class="flex-item" ><img src="' + path + '"></div>';
              //  console.log(divs)
            });

            document.getElementById("player3").innerHTML = divs;
            var divs = '';
            player4.forEach(function (item) {
                var path = "/ironman/images/" + item + ".png";
                divs += '<div class="flex-item" ><img src="' + path + '"></div>';
                //console.log(divs)
            });

            document.getElementById("player4").innerHTML = divs;
            
            var divs = '';
            var path = "/ironman/stages/" + stage + ".png";
         divs += '<div class="flex-item" ><img src="' + path + '"></div>';
            document.getElementById("stage").innerHTML = divs;
            stageset.add(stage);
console.log(stageset)
        }
    </script>
</body>
